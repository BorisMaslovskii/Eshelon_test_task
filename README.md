Добрый день.

Этот проект - результат работы над тестовым заданием описанным в "README_TASK.md"

В parser.go я реализовал структуру Condition (в которую я помещаю отдельные where условия), требуемый метод Parser, несколько служебных функций и две функции для проверки валидности имени колонки и соответствия типов колонки и значения тем, которые присутствуют в целевой таблице. Использование функций проверки валидности закомментировано в коде парсера, т.к. нужно знать конфигурацию и адрес базы данных.

Парсер разбивает исходную строку на отдельные слова, и заполняет ими слайс структур Condition, далее field и value этих структур валидируются (опционально) и добавляются как WHERE условия в исходный squirrel.SelecterBuilder. В случае если нарушен синтаксис SQL и структура Condition не заполняется корректно - парсер возвращает ошибку.

В parser_test.go я написал тесты для двух случаев: работа парсера без валидации и отдельно валидация значений в моей тестовой базе данных. Вы можете изменить конфигурацию и адрес базы на свою тестовую и проверить работу функции валидации. Валидация реализована только для int и string значений. Также по тестовым случаям будет видно как на данный момент работает мой парсер и валидация.

Я тестировал со свежей версией Postgres и она корректно обрабатывала имена колонок с точками, так что я никак их не экранировал.

Я не нашел в squirrel типов для операторов "\~", "\~\*", "!~", "!~*". Я так понял это поиск по POSIX регулярным выражениям, синтаксис которых отличается от операторов LIKE и ILIKE. В итоге в случае обнаружения этих операторов я пересобираю иходную строку из полей структур, чтобы сохранить экранирование и помещаю в SelectBuilder через squirrel.Where(newQuery). Если есть способ сделать это по-другому, буду признателен, если вы мне сообщите.

Я понимаю, что в проекте не реализованы некоторые варианты синтаксиса Postgres, например IN или BETWEEN, а также предсказуемо обрабатываются только string и int типы данных. Если будет необходимо, я могу доработать этот проект, но уже после возвращения из отпуска в начале мая.

В любом случае, буду признателен получить обратную связь о том, что было реализовано некорректно, что понравилось/непонравилось в моем коде.

С уважением, Борис.
